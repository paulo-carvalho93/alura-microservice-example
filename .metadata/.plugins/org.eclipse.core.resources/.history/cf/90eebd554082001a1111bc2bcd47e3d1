package br.com.restaurante.pagamentoservice.service;

import org.springframework.messaging.support.MessageBuilder;

import br.com.restaurante.pagamentoservice.model.Pagamento;
import br.com.restaurante.pagamentoservice.model.PagamentoConfirmado;

import br.com.restaurante.pagamentoservice.AmqpPagamentoConfig.PagamentoSource;

public class NotificacaoPagamentoConfirmado {
	
	 private PagamentoSource source;

	  void notificaPagamentoConfirmado(Pagamento pagamento) {
	    Long pagamentoId = pagamento.getId();
	    Long pedidoId = pagamento.getPedidoId();
	    PagamentoConfirmado confirmado = new PagamentoConfirmado(pagamentoId, pedidoId);
	    source.pagamentosConfirmados().send(MessageBuilder.withPayload(confirmado).build());
	  }

}
